# ğŸ¯ Guia Visual RÃ¡pido - Sistema de Agendamento

## ğŸ“± Para o UsuÃ¡rio Final

### Como Agendar um Contato

**1. Cliente solicita durante a conversa:**
```
Cliente: "Pode me chamar daqui 2 horas?"
Cliente: "Me liga amanhÃ£"
Cliente: "Volta a falar comigo em 30 minutos"
```

**2. IA confirma automaticamente:**
```
IA: "Claro! Vou entrar em contato com vocÃª daqui 2 horas entÃ£o."
```

**3. Ver agendamentos:**
- Clique no botÃ£o **"ğŸ“… CalendÃ¡rio de Agendamentos"** (canto superior direito)
- Veja todos os contatos agendados
- Filtre por status (pendente/executado/falha)

### Interface do CalendÃ¡rio

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“… CalendÃ¡rio de Contatos Agendados                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Total  â”‚  â”‚Pendentesâ”‚  â”‚Executadosâ”‚  â”‚Falhas â”‚       â”‚
â”‚  â”‚   15   â”‚  â”‚    3    â”‚  â”‚    11    â”‚  â”‚   1   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                          â”‚
â”‚  ğŸŸ¡ PENDENTE                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ‘¤ JoÃ£o Silva                                   â”‚    â”‚
â”‚  â”‚ ğŸ“ 5511999999999                                â”‚    â”‚
â”‚  â”‚ ğŸ• 11/12/2025 Ã s 16:30                         â”‚    â”‚
â”‚  â”‚ ğŸ“… Agendado para daqui 25 minutos              â”‚    â”‚
â”‚  â”‚ ğŸ“ Cliente pediu para falar daqui 2 horas      â”‚    â”‚
â”‚  â”‚                              [Cancelar]         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                          â”‚
â”‚  ğŸŸ¢ EXECUTADO                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ‘¤ Maria Santos                                 â”‚    â”‚
â”‚  â”‚ ğŸ“ 5511888888888                                â”‚    â”‚
â”‚  â”‚ ğŸ• 11/12/2025 Ã s 14:00                         â”‚    â”‚
â”‚  â”‚ âœ… Executado em: 11/12/2025 Ã s 14:00          â”‚    â”‚
â”‚  â”‚ ğŸ“ Cliente pediu para voltar a falar hoje      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                          â”‚
â”‚  ğŸ”´ ATRASADO âš ï¸                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ‘¤ Pedro Costa                                  â”‚    â”‚
â”‚  â”‚ ğŸ“ 5511777777777                                â”‚    â”‚
â”‚  â”‚ ğŸ• 11/12/2025 Ã s 13:00                         â”‚    â”‚
â”‚  â”‚ âš ï¸ Atrasado - hÃ¡ 3 horas                       â”‚    â”‚
â”‚  â”‚ ğŸ“ Cliente pediu para ligar de manhÃ£           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ Para Administradores

### Painel de Controle (Supabase)

**Ver todos os agendamentos:**
```sql
SELECT 
  client_name,
  client_whatsapp_number,
  scheduled_for,
  status,
  reason
FROM scheduled_contacts
ORDER BY scheduled_for DESC;
```

**Ver pendentes prÃ³ximos:**
```sql
SELECT * FROM pending_scheduled_contacts
ORDER BY scheduled_for ASC;
```

**EstatÃ­sticas:**
```sql
SELECT 
  status,
  COUNT(*) as total,
  COUNT(*) * 100.0 / SUM(COUNT(*)) OVER() as percentual
FROM scheduled_contacts
GROUP BY status;
```

### Logs e Monitoramento

**GitHub Actions:**
```
Actions â†’ Execute Scheduled Contacts Worker
  â””â”€ Ver Ãºltimas execuÃ§Ãµes
  â””â”€ Logs detalhados
  â””â”€ Status de cada agendamento processado
```

**Supabase:**
```
Edge Functions â†’ scheduled-contact-worker
  â””â”€ Logs em tempo real
  â””â”€ Erros e avisos
  â””â”€ Performance
```

---

## ğŸ¨ CÃ³digos de Status e Cores

| Status | Cor | Ãcone | Significado |
|--------|-----|-------|-------------|
| **pending** | ğŸŸ¡ Amarelo | â° | Aguardando execuÃ§Ã£o |
| **executed** | ğŸŸ¢ Verde | âœ… | Executado com sucesso |
| **cancelled** | âš« Cinza | âŒ | Cancelado manualmente |
| **failed** | ğŸ”´ Vermelho | âš ï¸ | Falhou na execuÃ§Ã£o |

---

## ğŸ“Š Dashboard de MÃ©tricas

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ“Š ESTATÃSTICAS DE AGENDAMENTOS                  â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                    â•‘
â•‘  Total de Agendamentos:              127          â•‘
â•‘  Pendentes:                           12  (9%)    â•‘
â•‘  Executados com Sucesso:             109 (86%)    â•‘
â•‘  Falhas:                               6  (5%)    â•‘
â•‘                                                    â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â•‘
â•‘                                                    â•‘
â•‘  ğŸ¯ Taxa de Sucesso:                 95%          â•‘
â•‘  â±ï¸  Tempo MÃ©dio de Resposta:        1.8 min      â•‘
â•‘  ğŸ“… PrÃ³ximo Agendamento:             em 15 min    â•‘
â•‘                                                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸš€ Fluxo de Dados Completo

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Cliente   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ "me chama daqui 2 horas"
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Mensagem WhatsApp  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GPT-Agent (IA)          â”‚
â”‚  â€¢ Analisa mensagem      â”‚
â”‚  â€¢ Detecta agendamento   â”‚
â”‚  â€¢ Extrai tempo          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Banco de Dados          â”‚
â”‚  scheduled_contacts      â”‚
â”‚  â€¢ scheduled_for         â”‚
â”‚  â€¢ status: pending       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ [Aguarda tempo...]
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub Actions          â”‚
â”‚  (a cada 2 minutos)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Worker Edge Function    â”‚
â”‚  â€¢ Busca vencidos        â”‚
â”‚  â€¢ Gera mensagem IA      â”‚
â”‚  â€¢ Envia WhatsApp        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cliente recebe          â”‚
â”‚  mensagem automÃ¡tica     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Casos de Uso

### Caso 1: Cliente Ocupado
```
Cliente: "Estou em reuniÃ£o, pode me chamar daqui 1 hora?"
IA: "Tranquilo! Te chamo daqui 1 hora."
[1 hora depois]
IA: "E aÃ­ JoÃ£o, como combinamos, voltei aqui pra gente 
     continuar nossa conversa. Conseguiu sair da reuniÃ£o?"
```

### Caso 2: Seguimento de Proposta
```
Cliente: "Me dÃ¡ atÃ© amanhÃ£ pra pensar"
IA: "Sem problema! Te dou um toque amanhÃ£ entÃ£o."
[No dia seguinte]
IA: "Bom dia Maria! Passando aqui pra saber se vocÃª 
     conseguiu pensar sobre nossa proposta."
```

### Caso 3: HorÃ¡rio EspecÃ­fico
```
Cliente: "Volta a falar comigo em 30 minutos"
IA: "Beleza! Daqui 30 minutos eu volto a falar com vocÃª."
[30 minutos depois]
IA: "E aÃ­ Pedro, tudo certo? Voltei como prometido!"
```

---

## ğŸ“± NotificaÃ§Ãµes e Alertas

### Para UsuÃ¡rios
- âœ… ConfirmaÃ§Ã£o visual no calendÃ¡rio
- âœ… Badge de status atualizado em tempo real
- âœ… NotificaÃ§Ã£o quando agendamento Ã© executado

### Para Administradores
- âš ï¸ Alerta de agendamentos atrasados
- ğŸ“Š RelatÃ³rio diÃ¡rio de execuÃ§Ãµes
- ğŸ”´ NotificaÃ§Ã£o de falhas

---

## ğŸ› ï¸ AÃ§Ãµes DisponÃ­veis

### Para Agendamentos Pendentes
- âœ… **Ver detalhes** - Ver contexto completo
- âŒ **Cancelar** - Cancelar agendamento
- ğŸ“ **Ver conversa** - Abrir histÃ³rico completo

### Para Agendamentos Executados
- âœ… **Ver detalhes** - Ver quando foi executado
- ğŸ“ **Ver resposta** - Ver mensagem enviada
- ğŸ“Š **Analytics** - Ver mÃ©tricas de sucesso

### Para Agendamentos Falhos
- ğŸ”„ **Reagendar** - Tentar novamente
- ğŸ“‹ **Ver erro** - Ver detalhes da falha
- ğŸ”§ **Corrigir** - Ajustar dados e reprocessar

---

## âœ¨ Dicas de Uso

### Para Melhores Resultados

âœ… **Use frases claras:**
- âœ”ï¸ "me chama daqui 2 horas"
- âœ”ï¸ "volta a falar comigo amanhÃ£"
- âŒ "talvez mais tarde" (muito vago)

âœ… **Monitore o calendÃ¡rio:**
- Verifique agendamentos atrasados
- Cancele se nÃ£o for mais necessÃ¡rio
- Reagende falhas quando necessÃ¡rio

âœ… **Mantenha WhatsApp conectado:**
- InstÃ¢ncia deve estar ativa
- NÃºmero do cliente deve ser vÃ¡lido
- QR Code sempre atualizado

---

## ğŸ†˜ ResoluÃ§Ã£o RÃ¡pida de Problemas

| Problema | SoluÃ§Ã£o RÃ¡pida |
|----------|---------------|
| ğŸ”´ Agendamento nÃ£o detectado | Use frase mais explÃ­cita ("daqui X horas") |
| ğŸ”´ Mensagem nÃ£o enviada | Verificar instÃ¢ncia WhatsApp conectada |
| ğŸ”´ Agendamento atrasado | Worker pode ter delay de atÃ© 2 min |
| ğŸ”´ Status nÃ£o atualiza | Recarregar calendÃ¡rio (F5) |
| ğŸ”´ Erro ao cancelar | Verificar permissÃµes do usuÃ¡rio |

---

**ğŸ‰ Sistema funcionando e pronto para uso!**

Para mais detalhes, consulte:
- ğŸ“– `docs/SISTEMA_AGENDAMENTO_CONTATOS.md` - DocumentaÃ§Ã£o completa
- âš™ï¸ `docs/CONFIGURACAO_AGENDAMENTO.md` - Guia de configuraÃ§Ã£o
- ğŸ“‹ `docs/RESUMO_AGENDAMENTO_IMPLEMENTADO.md` - Resumo executivo
